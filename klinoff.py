import pygame
import random
import os
import time

the_true_klinoff = "klinoff "
file_name = "klinoff.hns"
current_directory = os.getcwd()
sound_file = ""
level_of_pain = 0
difficulty = 0
isTrueKlinoff = False
asciiArt = ""


def play_sound(file):
    pygame.mixer.init()
    pygame.mixer.music.load(file)
    pygame.mixer.music.play()
    while pygame.mixer.music.get_busy():
        pygame.time.Clock().tick(30)


def level_of_pain_maker():
    global level_of_pain
    while True:
        try:
            level_of_pain = int(input("Enter the level of pain: "))
            break
        except ValueError:
            print("Not a valid number. Please try again.")

    print("Level of pain:", level_of_pain)


def start_file_maker():
    global sound_file
    string_slice = ["klanoff "] * level_of_pain
    fake_words = [the_true_klinoff, "kalnoff ", "kann√∂ff "]
    random.shuffle(fake_words)

    for fake_word in fake_words:
        index_to_insert = random.randint(0, len(string_slice))
        string_slice.insert(index_to_insert, fake_word)

    result_string = ''.join(string_slice)

    with open(file_name, 'w') as file:
        file.write(result_string)

    countdown()


def countdown():
    clear_console()
    print("Find the true klinoff!")

    if os.name == 'nt':  # Windows
        os.system("start notepad " + file_name)
    elif os.name == 'posix':  # Linux
        os.system("xdg-open " + file_name)

    play_sound(os.path.join(current_directory, sound_file))
    force_shut_editor()
    scan_file(file_name, the_true_klinoff)
    os.remove(os.path.join(current_directory, file_name))


def clear_console():
    if os.name == 'nt':  # Windows
        os.system("cls")
    elif os.name == 'posix':  # Linux
        os.system("clear")

    print(asciiArt)


def scan_file(file_name, the_true_klinoff):
    global isTrueKlinoff
    with open(file_name, 'r') as file:
        lines = file.readlines()

    for line in lines:
        if the_true_klinoff in line:
            print("You are not a true klinoff!")
            isTrueKlinoff = False
            return

    print("You are The true Klinoff")
    isTrueKlinoff = True


def force_shut_editor():
    if os.name == 'nt':  # Windows
        os.system("taskkill /im notepad.exe /f")


def START():
    global sound_file, difficulty, isTrueKlinoff, asciiArt
    
    asciiArt = """
    Beta Release 0.0.2 / Minor bugs may occur / Please report any bugs to the developer at Klinoff@klinoff.dev 
    If you experience any bugs, restart the program and try again.
    if you are a true klinoff you will find the true klinoff in the file
    _    _           _____               _  __ _  _                 __   __ 
    | |  | |  ___    / ____|             | |/ /| |(_)               / _| / _|
    | |__| | ( _ )  | (___   __      __  | ' / | | _  _ __    ___  | |_ | |_ 
    |  __  | / _ \/\ \___ \  \ \ /\ / /  |  <  | || || '_ \  / _ \ |  _||  _|
    | |  | || (_>  < ____) |  \ V  V /_  | . \ | || || | | || (_) || |  | |  
    |_|  |_| \___/\/|_____/    \_/\_/(_) |_|\_\|_||_||_| |_| \___/ |_|  |_|  
    """
    print(asciiArt)
    play_sound("sound/klinoff_introduction.mp3")
    level_of_pain_maker()

    # Set difficulty between 1 and 3
    clear_console()
    print("Choose the difficulty:")
    print("1. Easy")
    print("2. Medium")
    print("3. Hard")

    while True:
        try:
            difficulty = int(input("Enter the difficulty (1-3): "))
            if 1 <= difficulty <= 3:
                break
            else:
                print("Not a valid number. Please try again.")
        except ValueError:
            print("Not a valid number. Please try again.")

    if difficulty == 1:
        sound_file = "sound/easy_mode.ogg"
    elif difficulty == 2:
        sound_file = "sound/medium_mode.mp3"
    elif difficulty == 3:
        sound_file = "sound/hard_mode.mp3"

    start_file_maker()

    colors = ["\033[31m", "\033[32m", "\033[33m", "\033[34m",
              "\033[35m", "\033[36m"]  # ANSI color escape codes

    if not isTrueKlinoff:
        # ASCII art
        asciiArt = """
        @@@@@@@@@@@@@@@@@%*@@@@@@%..&@@@@*.,&@@(..@@@&@@@@@@@*....,@@@@#.     .%#/(#.*...*%@@@@@@@@@@@@@@@@@
        @@@@@@@@@@@@@@@@@@@@@@@( .(@@@@@@@@@@@@@@@&&&@@@@@@@@@@@@@@@@@, /#####(  &@@@@@@@@@@@@@@@@@@@@@@@@@@
        @@@@@@@@@@@@@@@@@@@@@@....,,.. &@@@@@@%, .,*, .#@@@@@@@@@@@@@%.,%/..../* /@@@@@@@@@@@@@@@@@@@@@@@@@@
        @@@@@@@@@@@@@@@@@@@@%//*//(/,/*@@@@@@. /###/*(%. #@%/,        .(##*.,*/ ,@@@@@@@@@@@@@@@@@@@@@@@@@@@
        @@@@@@@@@@@@&..*///////((###/(&@@@@@% .##(....(#(//###################%%/,   /&@@@@@@@@@@@@@@@@@@@@@
        @@@@@@@@@@@(     ,///(#%%#(/%%%@@@@@@&.  ,#############################%%%%%%#*  /@@@@@@@@@@@@@@@@@@
        @@@@@@@#..  ..*(((((%&&#(*%%#(/@@@@@@@%, .##################################%%%%%(. ,%@@@@@@@@@@@@@@
        @@@@*.  ,....*(,..(&&(//(%%(/..(/%@@#  /########################################%%%%( .%@@@@@@@@@@@@
        @@@,.,. ..,*(&/../.,(*(%%##/,/#.*/((.###############################################%%#. %@@@@@@@@@@
        @@@,,.,/      .&/,#.,&%#%#/*#,.  ,,*//*(##############################################%%#  (@@@@@@@@
        @@@,,*&        .@./.,##(.,/%   .  .,*/((//((##########################################(*,*(. %@@@@@@
        @@&,*,(        *(,(./#/#./.*   .  .**/(#%%%##################((((((#########################, (@@@@@
        @@@#/*,,/&#((*(,,*.,(##.(.,       *(##%%%%%%###########(/(#%%%%%%%%%%#/(#####################* (@@@@
        @@@@@/************###/((#####*   ./#%#%%###/########((%%%%%%%%%%%%%%%&&&%#/(########//(///(###* %@@@
        @@@@@(//.,,/#/**###(,,(##%%%%((  *(##%%#(&@@@%/###/(%%%%%%%%%%%%%%%%%%%%&&%%((##(*#@@@@@@@@&/##,,@@@
        @@@@@/.*.... .%..#/.,#/(/((##((. *##%%%(**@@@@@/(/#%%%%#,..../%%%%%#/,*#%%&&%(((*%@@@@@%,./@@/#* (@@
        @@@@@/,*.    ,/***.,/*.#*****/((((/#%%%*.,&@@@@//(%%%%%*.....,#%%%#,....%%%%%#(/*%@@@@@&/*#@@/#(.,@@
        @@@@@. #,////*.#,,*,,/&&&&&%%%##(#(,*/#@@@@@@@((/(%%%%%%(*,,*#%%%%%(,.,(%%%%%%(//*(@@@@@@@@%*##(.,@@
        @@@@@@..     ..  .*######%%%%%%%%#((/**/(((/*(###/(##%%%%%%%%%%%%%%%%%%%%%%%%#(#(((/**//**/####* (@@
        @@@@@@. ..     ..*/((((((((######(((###############(/(####%%%%%%%%%%%%%%%###(/################/.*@@@
        @@@@@@             ..,,***///(#%##(###################(//((/(((((((((((///((#################/.,&@@@
        @@@@@@/     ....,.*/(#####%%%%%%%#/(###################(///////////////####################(* *&@@@@
        @@@@@@@@.      . ,**///(((((#####/ ./(#####################/*******//###################(/. .&@@@@@@
        &@@@@@@@@&. .,.   .,****///*/(##%&&(  ,//(###########################################(/,  #&@@@@@@@@
        &&&&&&&&&&&#   ,*((((#((((##(((&&&&&&&(.  ,//(((###############################(((/*. .(&&&&&&&&&&&&
        &&&&&&&&&&&&&. .*////*//(((((%&&&&&&&&&&&%/. .,*///(((((((((((((((((((((((((//*,. .*#&&&&&&&&&&&&&&&
        &&&&&&&&&&&&&&&&/*..,,**/&&&&&&&&&&&&&&&&&&&&&#/.    .,**///////////**,..    ./%&&&&&&&&&&&&&&&&&&&&
        &&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%#((/**/(((#&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&  
        """

    else:
        # ASCII art
        asciiArt = """
                @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@& *##(* @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#,((///(#.@@@@@@@@@@@@%*,(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ /(///(( @@@@@@@@@@ ((#(((/,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&. ,((((((((((((((*.  (/////##.@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@% .((###################(#(((#((. @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ .#(###(##################(#######, &@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@% /(######(##(#(((###########((((#####((..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ ,/,*(##############(((##(###########,,,((#. @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@( ((((##(#((##############################((((( %@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@, ((###(#((##((#(//(######(//((####(####((((####( *@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@% (/#@@@@@&,(#(*################/((##(*@@@@@@@*((## *@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ ./@@@@@@@@@&/####################*#(#@@@@@@@@@&/##/ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ ,&@.  @@@@@((###*...,###(....####(//&@@@@@( ,@@*### &@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ .,@@@@@@@@@/####/...,####....####(/#*&@@@@@@@@*/##( %@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@( //**%&&/*/(/####################/(#(//**/**//(#((, @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@* /((((((#((((/################/(((#####(((#((###* @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@& */(#########((///////////(((##############(((..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*. ,(((((####(#((((((((((((############(##(/..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@....,,,. ,//(((##########(#(((##((##((##((//. ...(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,    .  ,,,,,,,.  ,///((((((((((((#(((((((*.  ....,..     *&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@@@@@@/.          ..,,,,,,,                           ...,,,.           *@@@@@@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@@@# ...........     ....,,,.                             .,........ . .....   (@@@@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@@#............... . .  ...,..                            ...,, ................   @@@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@@@   ................... ....,,.                          .  ....................... *@@@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@@@ &#/%*. ............. .. .,....,.                       ...... ,.........., .... ....&&/@@@@@@@@@@@@@@@
		@@@@@@@@@@@@@@@/.@.@%..*&%............... ,,.....,.   . ..               ....... /###*@&,.. ........@*&/,*%@@@@@@@@@@@@@
		@@@@@@@@@@@@@& &&#,(@(@@..,.............. ....,.....  .....             ......,*(/*//(@&@%........,(#,,&&&&,@@@@@@@@@@@@
		@@@@@@@@@@@@@   ..,..(@@..*/............... ......... ....... .        ,,,.., .,,,,***//((......#*@*&@*.....,@@@@@@@@@@@
		@@@@@@@@@@@@,    .......,&@# .......,... ........,...  .......        ........,,.,,,...... . .../............,@@@@@@@@@@
		@@@@@@@@@@@@       ......... .. ............@@/&,...,..**************.....,............... ..., ........(@*.. @@@@@@@@@@
		@@@@@@@@@@@*..&&&    /@(... .%%%&&...&@,...%@%(&@* ...*%/#&##(##%%%/*...,#@*.,@@&(@@@(@&./,,... ...... &%@%(@#&@@@@@@@@@
		@@@@@@@@@@@       .. .(*... .. .@@,(@&.....@@..,@@* .. ,*//*/******,...,&@@%.#@%..&@#.%@*(. ..    ... */ /***,#@@@@@@@@@
		@@@@@@@@@@*        . .(#*.., . .*@@@,.%@# *@&(%@@&. .,, ....        .. ..(@@*@@.,,@@,..@@ . ./    ........,... @@@@@@@@@
		@@@@@@@@@@ (/&@% ..  ......  .../@%...*,. ......,,,..., .           ......,,,,,,,,,,,*@@,. ./,   ...............@@@@@@@@
		@@@@@@@@@  *(/. %@@.... ...  ..%@/....... .,,,,,,.(&# ,. ..        ......,,,,,,,,,,,@@(,,, ..      .......,.....%@@@@@@@
		@@@@@@@@(      (#@(...... .   ,*..../@% .. %@%,,,,,.. ., ..        .....,,,,,,,,,,,,,,,,,,..   ./@@@@%,@@&/,*@.&.@@@@@@@
		@@@@@@@@     */  @%.*,  ....   .....%@@@,  @@*,,,,,..  . .        ./*.../&&(,,,*/,,,,,,.....,.(@,,.%@/(@#...,@%% @@@@@@@
		@@@@@@@& . .((,,@@@,..(%*,*   *.....&@#,/..@@,.%@@&@@. ...         (@(/@@,...&@(.,.%@@&@@#&.,#@&..,*,.......,@(/.@@@@@@@
		@@@@@@@@ ./  .       /@@...    . ...&&, ,/(@&.@@@&&&@& ..        , .....#@@#.,#@%(&@,..%*..*  .,........ .*&..*,*@@@@@@@
		@@@@@@@@,,.        .*(#. #@(   .*   //,  */(& %&(..%*.* .        .//.%(&@@*(#&@@*,@@&%@%.    , ..,***(..........@@@@@@@@
		@@@@@@@@%  ...,*.&@/ .&@* ,/%@#            .. . ,**.    .       .     ..................,.**./@@,&@@@/.%@,..... @@@@@@@@
		@@@@@@@@@ .,@@@@ #@%..*&@,%@@@#.     . ...              .       .......,....................(&&,(@@,..,#%&@&%@(*@@@@@@@@
		@@@@@@@@@%./% .@%.&@/.. .........      ... ...........  .        .,,,,,,,,,,.%@@@@%..    .........,/(*..@&,.,@*&@@@@@@@@
		@@@@@@@@@@,%@/@&(.............*@&      %/ ..,... .....  .      .(,,,.//*.,,,,@@.,@%..      ..............%@@@/,@@@@@@@@@
		@@@@@@@@@@@. /................@@@#..  &. *@&.,. #@@@@&,..       @(.#@@,,,,,.%@@@@&.&*.. .......#@@@@/.......*/@@@@@@@@@@
		@@@@@@@@@@@&.    .....        /%##@&/**(/.*&&@.@@/ . (...       @@@@,......,@@..%@*........(%#&/. .@@*.......#@@@@@@@@@@
		@@@@@@@@@@@@#    ..   ..  .. #%,        .%&&@#.&@%..&# .      ..@@,..@@@.,.&@@@&/(%...........#&&#  (......./@@@@@@@@@@@
		@@@@@@@@@@@@@# . #&/.&&...  .  ....     .*  ...,,//,(* .       &*..,,,,,,,...../@/..................*   ,..&@@@@@@@@@@@@
        """

    random_color = random.choice(colors)  # Select a random color from the list
    reset_color = "\033[0m"  # Reset color to default

    if isTrueKlinoff:
        print(f"{random_color}You are The true Klinoff{reset_color}")
        print(asciiArt)
        play_sound("sound/klinoff_happy_ending.mp3")
    else:
        print(f"{random_color}You are not a true klinoff!{reset_color}")
        print(asciiArt)
        play_sound("sound/klinoff_outro.mp3")

    # Print ASCII art below

    if isTrueKlinoff:
        time.sleep(0.385)
    else:
        time.sleep(0.43)
    clear_console()
